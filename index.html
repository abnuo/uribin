<head>
    <title>UriBin</title>
    <style>
        h1, #tag { text-align: center; }
        body { padding: 2em 5%; font-family: sans-serif; }
        textarea { width: 100%; font-size: 13px; color: #000; margin: 0 0 20px 0; border: 1px solid #ddd; padding: 10px; min-height: 300px; }
        textarea:disabled { background: #eee; }
        .e { display: none; }
        .n .e { display: inline; }
        .n .v { display: none; }
    </style>
</head>
<body>
    <h1>UriBin</h1>
    <p id='tag'>A self-replicating paste bin that lives in URL shorteners</p>
    <textarea disabled  id='t'>Test</textarea>
    <input type='button' class='e' value='Save to TinyuRL' onclick="window.open('http://tinyurl.com/create.php?url='+uri(),'_blank')">
    <input type='button' class='e' value='Paste' onclick="window.open(uri(),'_blank')">
    <input type='button' class='v' value='New Paste' onclick="t.value='';t.disabled=false;c.add('n');t.focus();">
    <p>By <a href='https://twitter.com/captbaritone'>@captbaritone</a></p>
    <script>
        t = document.getElementById('t');
        t.style.height = t.scrollHeight + 10;
        c = document.querySelector('body').classList;
        function uri() {
            var x = new XMLHttpRequest();
            x.open('GET', document.URL, false);
            x.send(null);
            h = x.responseText.replace(/(<textarea.*>)(.*)(<\/textarea>)/, function(z, a, b, c) {
                t.textContent = t.value;
                return a + t.innerHTML + c;
            });
            return "data:text/html," + encodeURIComponent(h);
        }
    </script>
</body>
